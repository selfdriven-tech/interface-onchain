{"version":3,"file":"rcMap.js","names":["Context","Duration","dual","identity","MutableHashMap","pipeArguments","coreEffect","core","circular","fiberRuntime","TypeId","Symbol","for","variance","_K","_A","_E","RcMapImpl","lookup","context","scope","idleTimeToLive","capacity","state","_tag","map","empty","semaphore","unsafeMakeSemaphore","constructor","pipe","arguments","make","options","withFiberRuntime","fiber","getFiberRef","currentContext","get","scopeTag","self","decode","undefined","Math","max","Number","POSITIVE_INFINITY","as","addFinalizer","suspend","void","forEachSequentialDiscard","entry","scopeClose","exitVoid","tap","clear","withPermits","self_","key","uninterruptibleMask","restore","getImpl","fnUntraced","interrupt","o","value","refCount","isFinite","size","fail","ExceededCapacityException","acquire","finalizer","deferredAwait","deferred","scopeMake","deferredMake","fiberRefLocally","add","exit","flatMap","deferredDone","forkIn","expiresAt","release","set","clockWith","clock","has","remove","unsafeCurrentTimeMillis","toMillis","interruptibleMask","loop","now","remaining","sleep","millis","ensuring","sync","keys","impl","succeed","invalidate","interruptFiber","touch"],"sources":["../../../src/internal/rcMap.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}